<!DOCTYPE html>
<html lang="en">
  <header>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DOM</title>
    <link rel="stylesheet" href="../css/style.css" />
  </header>
  <body>
    <button onclick="history.back();" class="go-back">ðŸ‘ˆGo Back</button>
    <p>YouTube Subscribe Button</p>
    <button onclick="subscribe()" class="btn-youtube">Subscribe</button>
    <p>Amazon Shipping Calculator</p>
    <p>Orders under $40 = +$10 shipping.</p>
    <p>Orders over $40 = FREE shipping.</p>
    <input
      type="number"
      name="cost_order"
      id="cost_order"
      placeholder="Cost of order"
      onkeydown="handleCostKeydown()"
    />
    <button onclick="shippingCalculator()" class="calculate-btn">
      Calculate
    </button>
    <p class="total-orders-js"></p>
    <p class="error-msg-js"></p>

    <div style="display: inline-block">
      <input
        type="text"
        name="input-name-js"
        class="input-name-js"
        onkeyup="handleInputKeyUp();"
        placeholder="Type Text here..."
      />
      <span class="display-name-js">Output</span>
    </div>
  </body>
  <script>
    const displayNameEl = document.querySelector(".display-name-js");
    const errorMsgEl = document.querySelector(".error-msg-js");

    const handleInputKeyUp = (e) => {
      const inputNameEl = document.querySelector(".input-name-js");
      displayNameEl.textContent = inputNameEl.value;
    };

    let click = true;
    function subscribe() {
      const btnSubscribeEl = document.querySelector(".btn-youtube");
      if (btnSubscribeEl.textContent === "Subscribe") {
        btnSubscribeEl.textContent = "Subscribed";
        btnSubscribeEl.classList.add("is-subscribed");
      } else {
        btnSubscribeEl.textContent = "Subscribe";
        btnSubscribeEl.classList.remove("is-subscribed");
      }
    }

    const handleCostKeydown = (e) => {
      errorMsgEl.textContent = "";
      event.key === "Enter" && shippingCalculator();
    };

    function shippingCalculator() {
      let costOrderVal = Number(
        document.querySelector("#cost_order").value * 100
      );
      const cost = costOrderVal / 100;

      let totalOrders = document.querySelector(".total-orders-js");
      let shippingFlag = "FREE shipping.";

      if (cost < 40) {
        costOrderVal = costOrderVal + 10;
        console.log("costOrderVal", costOrderVal);
        shippingFlag = "with +$10 shipping.";
      }

      if (cost < 0) {
        errorMsgEl.textContent = "Error: cost cannot be less than $0";
      } else {
        totalOrders.textContent = `$${cost} ${shippingFlag}`;
      }
    }
  </script>
</html>
